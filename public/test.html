<!DOCTYPE html>
<html>
<head>
    <title>Test B√†sic</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: white;
        }
        .box {
            border: 2px solid black;
            padding: 20px;
            margin: 10px 0;
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>üîß Test B√†sic</h1>

    <div class="box">
        <h2>1. HTML carrega</h2>
        <p>Si veus aix√≤, el servidor funciona</p>
    </div>

    <div class="box">
        <h2>2. JavaScript Test</h2>
        <p id="js-test">JavaScript NO carrega</p>
    </div>

    <div class="box">
        <h2>3. Environment Variables</h2>
        <pre id="env-vars">Loading...</pre>
    </div>

    <div class="box">
        <h2>4. Supabase Test</h2>
        <pre id="supabase-test">Testing...</pre>
    </div>

    <script type="module">
        console.log('üöÄ test.html JavaScript is running');

        document.getElementById('js-test').textContent = '‚úÖ JavaScript FUNCIONA!';
        document.getElementById('js-test').style.color = 'green';

        const envVars = {
            VITE_USE_MOCK_DATA: import.meta.env.VITE_USE_MOCK_DATA,
            VITE_SUPABASE_URL: import.meta.env.VITE_SUPABASE_URL,
            HAS_ANON_KEY: !!import.meta.env.VITE_SUPABASE_ANON_KEY,
            ANON_KEY_LENGTH: import.meta.env.VITE_SUPABASE_ANON_KEY?.length
        };

        console.log('üì¶ Environment:', envVars);
        document.getElementById('env-vars').textContent = JSON.stringify(envVars, null, 2);

        // Test Supabase
        (async () => {
            try {
                const { createClient } = await import('@supabase/supabase-js');
                console.log('üì¶ Supabase client imported');

                const supabase = createClient(
                    import.meta.env.VITE_SUPABASE_URL,
                    import.meta.env.VITE_SUPABASE_ANON_KEY
                );

                console.log('üîß Supabase client created');

                const { data, error } = await supabase
                    .from('products')
                    .select('id, name')
                    .limit(3);

                if (error) {
                    console.error('‚ùå Supabase error:', error);
                    document.getElementById('supabase-test').textContent =
                        '‚ùå Error: ' + error.message;
                    document.getElementById('supabase-test').style.color = 'red';
                } else {
                    console.log('‚úÖ Products:', data);
                    document.getElementById('supabase-test').textContent =
                        '‚úÖ Success!\n' + JSON.stringify(data, null, 2);
                    document.getElementById('supabase-test').style.color = 'green';
                }
            } catch (err) {
                console.error('‚ùå Exception:', err);
                document.getElementById('supabase-test').textContent =
                    '‚ùå Exception: ' + err.message;
                document.getElementById('supabase-test').style.color = 'red';
            }
        })();
    </script>
</body>
</html>
